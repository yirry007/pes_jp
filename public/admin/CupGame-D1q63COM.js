import{h as j,r as m,j as e,I as v,V as C,T,U as l,S as n}from"./index-C9q2FBSY.js";import{S as z}from"./SearchForm--fHSw7Ey.js";import{c as f}from"./cup-DYMywX8B.js";import{d as b}from"./index-CxR-IuS2.js";import{T as G}from"./Timeline-B-KUMHeq.js";import{T as N}from"./index-BQCSfmgw.js";import{F,D as V}from"./index-BhUjsVSm.js";import{C as A}from"./index-pw3sry7n.js";import{A as y}from"./index-9rTpl9La.js";import{T as o}from"./index-CTwM5QEi.js";import{T as E}from"./index-CXwXhMOH.js";import"./useIcons-B3ELihdy.js";function M(){const{Title:g,Text:d}=E,[c]=j.useForm(),[w,_]=m.useState([]),[t,x]=m.useState({});m.useEffect(()=>{p()},[]);const p=async r=>{const s=await f.getCupGames(r);_(s);const a={};s.forEach(u=>{u.games.forEach(h=>{a[h.id]=h.status})}),x(a)},S=()=>{p({...c.getFieldsValue()})},i=async r=>{await f.updateCupGame(r)};return e.jsxs("div",{children:[e.jsx(z,{form:c,submit:S,reset:()=>{c.resetFields(),p()},children:e.jsx(j.Item,{name:"name",label:"杯赛名称",children:e.jsx(v,{placeholder:"请输入杯赛名称"})})}),e.jsxs("div",{className:"base-table",children:[e.jsx("div",{className:"header-wrapper",children:e.jsx("div",{className:"title",children:"杯赛赛程"})}),e.jsx(G,{style:{padding:"20px"},items:w.map(r=>({children:e.jsxs(e.Fragment,{children:[e.jsxs(N,{color:"success",children:["第",r.round,"轮"]}),e.jsx(F,{wrap:!0,gap:"middle",style:{marginTop:"12px"},children:r.games.map(s=>e.jsx(A,{size:"small",title:e.jsx(V,{disabled:t[s.id]===1,allowClear:!1,size:"small",showTime:!0,defaultValue:b(s.game_time),onChange:(a,u)=>i({id:s.id,game_time:u})}),extra:e.jsx(C,{size:"small",defaultValue:s.status===1,onChange:a=>{x({...t,[s.id]:a?1:0}),i({id:s.id,status:a?1:0})}}),style:{width:300},children:e.jsxs(T,{gutter:8,children:[e.jsx(l,{className:"gutter-row",span:6,style:{textAlign:"center"},children:e.jsxs(n,{direction:"vertical",align:"center",children:[e.jsx(y,{shape:"square",size:50,src:s.head_image_home}),e.jsx(d,{type:"secondary",style:{fontSize:12},children:s.nickname_home})]})}),e.jsx(l,{className:"gutter-row",span:5,children:e.jsxs(n,{direction:"vertical",align:"center",children:[e.jsx(o,{disabled:t[s.id]===1,controls:!1,style:{width:"50px",height:"38px",fontSize:"18px"},min:0,max:20,defaultValue:s.home_goal,onBlur:a=>i({id:s.id,home_goal:a.target.value})}),e.jsx(o,{disabled:t[s.id]===1,controls:!1,style:{width:"50px",height:"38px",fontSize:"18px"},min:0,max:20,defaultValue:s.home_goal_penalty,onBlur:a=>i({id:s.id,home_goal_penalty:a.target.value})})]})}),e.jsx(l,{className:"gutter-row",span:2,children:e.jsxs(n,{direction:"vertical",align:"center",children:[e.jsx(g,{style:{textAlign:"center"},level:3,children:"-"}),e.jsx(d,{type:"secondary",children:"点"})]})}),e.jsx(l,{className:"gutter-row",span:5,children:e.jsxs(n,{direction:"vertical",align:"center",children:[e.jsx(o,{disabled:t[s.id]===1,controls:!1,style:{width:"50px",height:"38px",fontSize:"18px"},min:0,max:20,defaultValue:s.away_goal,onBlur:a=>i({id:s.id,away_goal:a.target.value})}),e.jsx(o,{disabled:t[s.id]===1,controls:!1,style:{width:"50px",height:"38px",fontSize:"18px"},min:0,max:20,defaultValue:s.away_goal_penalty,onBlur:a=>i({id:s.id,away_goal_penalty:a.target.value})})]})}),e.jsx(l,{className:"gutter-row",span:6,style:{textAlign:"center"},children:e.jsxs(n,{direction:"vertical",align:"center",children:[e.jsx(y,{shape:"square",size:50,src:s.head_image_away}),e.jsx(d,{type:"secondary",style:{fontSize:12},children:s.nickname_away})]})})]})},s.id))})]})}))})]})]})}export{M as default};
