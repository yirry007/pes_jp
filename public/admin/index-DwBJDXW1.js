import{r as o,F as V,g as ge,m as he,a as me,u as y,C as pe,b as F,c as T,d as Ce,l as $e,e as fe,j as m,R as G,f as L}from"./index-C9q2FBSY.js";import{i as ve,g as ye,a as be,R as Se,b as xe,d as Me}from"./index-CxR-IuS2.js";import{S as J,G as Ye,B as q}from"./index-BfF7_6j9.js";import{T as H}from"./index-BQCSfmgw.js";import"./useIcons-B3ELihdy.js";const je=10,we=20;function Re(e){const{fullscreen:t,validRange:a,generateConfig:l,locale:u,prefixCls:i,value:p,onChange:C,divRef:b}=e,$=l.getYear(p||l.getNow());let g=$-je,s=g+we;a&&(g=l.getYear(a[0]),s=l.getYear(a[1])+1);const c=u&&u.year==="年"?"年":"",r=[];for(let d=g;d<s;d++)r.push({label:`${d}${c}`,value:d});return o.createElement(J,{size:t?void 0:"small",options:r,value:$,className:`${i}-year-select`,onChange:d=>{let f=l.setYear(p,d);if(a){const[S,R]=a,M=l.getYear(f),j=l.getMonth(f);M===l.getYear(R)&&j>l.getMonth(R)&&(f=l.setMonth(f,l.getMonth(R))),M===l.getYear(S)&&j<l.getMonth(S)&&(f=l.setMonth(f,l.getMonth(S)))}C(f)},getPopupContainer:()=>b.current})}function Ee(e){const{prefixCls:t,fullscreen:a,validRange:l,value:u,generateConfig:i,locale:p,onChange:C,divRef:b}=e,$=i.getMonth(u||i.getNow());let g=0,s=11;if(l){const[d,f]=l,S=i.getYear(u);i.getYear(f)===S&&(s=i.getMonth(f)),i.getYear(d)===S&&(g=i.getMonth(d))}const c=p.shortMonths||i.locale.getShortMonths(p.locale),r=[];for(let d=g;d<=s;d+=1)r.push({label:c[d],value:d});return o.createElement(J,{size:a?void 0:"small",className:`${t}-month-select`,value:$,options:r,onChange:d=>{C(i.setMonth(u,d))},getPopupContainer:()=>b.current})}function Ie(e){const{prefixCls:t,locale:a,mode:l,fullscreen:u,onModeChange:i}=e;return o.createElement(Ye,{onChange:p=>{let{target:{value:C}}=p;i(C)},value:l,size:u?void 0:"small",className:`${t}-mode-switch`},o.createElement(q,{value:"month"},a.month),o.createElement(q,{value:"year"},a.year))}function Ne(e){const{prefixCls:t,fullscreen:a,mode:l,onChange:u,onModeChange:i}=e,p=o.useRef(null),C=o.useContext(V),b=o.useMemo(()=>Object.assign(Object.assign({},C),{isFormItemInput:!1}),[C]),$=Object.assign(Object.assign({},e),{fullscreen:a,divRef:p});return o.createElement("div",{className:`${t}-header`,ref:p},o.createElement(V.Provider,{value:b},o.createElement(Re,Object.assign({},$,{onChange:g=>{u(g,"year")}})),l==="month"&&o.createElement(Ee,Object.assign({},$,{onChange:g=>{u(g,"month")}}))),o.createElement(Ie,Object.assign({},$,{onModeChange:i})))}const He=e=>{const{calendarCls:t,componentCls:a,fullBg:l,fullPanelBg:u,itemActiveBg:i}=e;return{[t]:Object.assign(Object.assign(Object.assign({},ye(e)),me(e)),{background:l,"&-rtl":{direction:"rtl"},[`${t}-header`]:{display:"flex",justifyContent:"flex-end",padding:`${y(e.paddingSM)} 0`,[`${t}-year-select`]:{minWidth:e.yearControlWidth},[`${t}-month-select`]:{minWidth:e.monthControlWidth,marginInlineStart:e.marginXS},[`${t}-mode-switch`]:{marginInlineStart:e.marginXS}}}),[`${t} ${a}-panel`]:{background:u,border:0,borderTop:`${y(e.lineWidth)} ${e.lineType} ${e.colorSplit}`,borderRadius:0,[`${a}-month-panel, ${a}-date-panel`]:{width:"auto"},[`${a}-body`]:{padding:`${y(e.paddingXS)} 0`},[`${a}-content`]:{width:"100%"}},[`${t}-mini`]:{borderRadius:e.borderRadiusLG,[`${t}-header`]:{paddingInlineEnd:e.paddingXS,paddingInlineStart:e.paddingXS},[`${a}-panel`]:{borderRadius:`0 0 ${y(e.borderRadiusLG)} ${y(e.borderRadiusLG)}`},[`${a}-content`]:{height:e.miniContentHeight,th:{height:"auto",padding:0,lineHeight:y(e.weekHeight)}},[`${a}-cell::before`]:{pointerEvents:"none"}},[`${t}${t}-full`]:{[`${a}-panel`]:{display:"block",width:"100%",textAlign:"end",background:l,border:0,[`${a}-body`]:{"th, td":{padding:0},th:{height:"auto",paddingInlineEnd:e.paddingSM,paddingBottom:e.paddingXXS,lineHeight:y(e.weekHeight)}}},[`${a}-cell`]:{"&::before":{display:"none"},"&:hover":{[`${t}-date`]:{background:e.controlItemBgHover}},[`${t}-date-today::before`]:{display:"none"},[`&-in-view${a}-cell-selected`]:{[`${t}-date, ${t}-date-today`]:{background:i}},"&-selected, &-selected:hover":{[`${t}-date, ${t}-date-today`]:{[`${t}-date-value`]:{color:e.colorPrimary}}}},[`${t}-date`]:{display:"block",width:"auto",height:"auto",margin:`0 ${y(e.calc(e.marginXS).div(2).equal())}`,padding:`${y(e.calc(e.paddingXS).div(2).equal())} ${y(e.paddingXS)} 0`,border:0,borderTop:`${y(e.lineWidthBold)} ${e.lineType} ${e.colorSplit}`,borderRadius:0,transition:`background ${e.motionDurationSlow}`,"&-value":{lineHeight:y(e.dateValueHeight),transition:`color ${e.motionDurationSlow}`},"&-content":{position:"static",width:"auto",height:e.dateContentHeight,overflowY:"auto",color:e.colorText,lineHeight:e.lineHeight,textAlign:"start"},"&-today":{borderColor:e.colorPrimary,[`${t}-date-value`]:{color:e.colorText}}}},[`@media only screen and (max-width: ${y(e.screenXS)}) `]:{[t]:{[`${t}-header`]:{display:"block",[`${t}-year-select`]:{width:"50%"},[`${t}-month-select`]:{width:`calc(50% - ${y(e.paddingXS)})`},[`${t}-mode-switch`]:{width:"100%",marginTop:e.marginXS,marginInlineStart:0,"> label":{width:"50%",textAlign:"center"}}}}}}},_e=e=>Object.assign({fullBg:e.colorBgContainer,fullPanelBg:e.colorBgContainer,itemActiveBg:e.controlItemBgActive,yearControlWidth:80,monthControlWidth:70,miniContentHeight:256},be(e)),Pe=ge("Calendar",e=>{const t=`${e.componentCls}-calendar`,a=he(e,ve(e),{calendarCls:t,pickerCellInnerCls:`${e.componentCls}-cell-inner`,dateValueHeight:e.controlHeightSM,weekHeight:e.calc(e.controlHeightSM).mul(.75).equal(),dateContentHeight:e.calc(e.calc(e.fontHeightSM).add(e.marginXS)).mul(3).add(e.calc(e.lineWidth).mul(2)).equal()});return[He(a)]},_e),K=(e,t,a)=>{const{getYear:l}=a;return e&&t&&l(e)===l(t)},B=(e,t,a)=>{const{getMonth:l}=a;return K(e,t,a)&&l(e)===l(t)},z=(e,t,a)=>{const{getDate:l}=a;return B(e,t,a)&&l(e)===l(t)},Q=e=>a=>{const{prefixCls:l,className:u,rootClassName:i,style:p,dateFullCellRender:C,dateCellRender:b,monthFullCellRender:$,monthCellRender:g,cellRender:s,fullCellRender:c,headerRender:r,value:d,defaultValue:f,disabledDate:S,mode:R,validRange:M,fullscreen:j=!0,onChange:_,onPanelChange:P,onSelect:O}=a,{getPrefixCls:Z,direction:k,calendar:w}=o.useContext(pe),E=Z("picker",l),v=`${E}-calendar`,[ee,te,ae]=Pe(E,v),X=e.getNow(),[Y,ne]=F(()=>d||e.getNow(),{defaultValue:f,value:d}),[I,le]=F("month",{value:R}),N=o.useMemo(()=>I==="year"?"month":"date",[I]),re=o.useCallback(n=>(M?e.isAfter(M[0],n)||e.isAfter(n,M[1]):!1)||!!(S!=null&&S(n)),[S,M]),W=(n,h)=>{P==null||P(n,h)},oe=n=>{ne(n),z(n,Y,e)||((N==="date"&&!B(n,Y,e)||N==="month"&&!K(n,Y,e))&&W(n,I),_==null||_(n))},A=n=>{le(n),W(Y,n)},D=(n,h)=>{oe(n),O==null||O(n,{source:h})},se=o.useCallback((n,h)=>c?c(n,h):C?C(n):o.createElement("div",{className:T(`${E}-cell-inner`,`${v}-date`,{[`${v}-date-today`]:z(X,n,e)})},o.createElement("div",{className:`${v}-date-value`},String(e.getDate(n)).padStart(2,"0")),o.createElement("div",{className:`${v}-date-content`},s?s(n,h):b==null?void 0:b(n))),[C,b,s,c]),ce=o.useCallback((n,h)=>{if(c)return c(n,h);if($)return $(n);const ue=h.locale.shortMonths||e.locale.getShortMonths(h.locale.locale);return o.createElement("div",{className:T(`${E}-cell-inner`,`${v}-date`,{[`${v}-date-today`]:B(X,n,e)})},o.createElement("div",{className:`${v}-date-value`},ue[e.getMonth(n)]),o.createElement("div",{className:`${v}-date-content`},s?s(n,h):g==null?void 0:g(n)))},[$,g,s,c]),[ie]=Ce("Calendar",$e),x=Object.assign(Object.assign({},ie),a.locale),de=(n,h)=>{if(h.type==="date")return se(n,h);if(h.type==="month")return ce(n,Object.assign(Object.assign({},h),{locale:x==null?void 0:x.lang}))};return ee(o.createElement("div",{className:T(v,{[`${v}-full`]:j,[`${v}-mini`]:!j,[`${v}-rtl`]:k==="rtl"},w==null?void 0:w.className,u,i,te,ae),style:Object.assign(Object.assign({},w==null?void 0:w.style),p)},r?r({value:Y,type:I,onChange:n=>{D(n,"customize")},onTypeChange:A}):o.createElement(Ne,{prefixCls:v,value:Y,generateConfig:e,mode:I,fullscreen:j,locale:x==null?void 0:x.lang,validRange:M,onChange:D,onModeChange:A}),o.createElement(Se,{value:Y,prefixCls:E,locale:x==null?void 0:x.lang,generateConfig:e,cellRender:de,onSelect:n=>{D(n,N)},mode:N,picker:N,disabledDate:re,hideHeader:!0})))},U=Q(xe);U.generateCalendar=Q;const Oe="_schedule_1c7ig_1",De={schedule:Oe},Te={getSchedule(e){return fe.get("/admin/schedule",e)}};function Fe(){const[e,t]=o.useState(Me()),[a,l]=o.useState([]),[u,i]=o.useState([]);o.useEffect(()=>{p({year:e.format("YYYY"),month:e.format("MM")})},[]);const p=async s=>{const c=await Te.getSchedule(s);l(c.games),i(c.league_cup)},C=async s=>{const c=s.format("YYYY"),r=s.format("MM"),d=e.format("YYYY"),f=e.format("MM");c===d&&r===f||(await p({year:c,month:r}),t(s))},b=s=>{const c=u[s.format("YYYY-MM")]||[];return m.jsx("ul",{className:"events",children:c.map(r=>m.jsx("li",{style:{margin:"4px 0"},children:r.game_mode?m.jsxs(H,{icon:m.jsx(G,{}),color:"warning",children:[r.name," ",r.start_date]}):m.jsxs(H,{icon:m.jsx(L,{}),color:"success",children:[r.name," ",r.start_date]})},r.index))})},$=s=>{const c=a[s.format("YYYY-MM-DD")]||[];return m.jsx("ul",{className:"events",children:c.map(r=>m.jsx("li",{style:{margin:"6px 0"},children:r.league_id?m.jsxs(H,{icon:m.jsx(G,{}),color:"warning",children:[r.time," ",r.league_name,m.jsx("br",{}),r.nickname_home," ",r.status===1?r.home_goal+" - "+r.away_goal:"-"," ",r.nickname_away]}):m.jsxs(H,{icon:m.jsx(L,{}),color:"success",children:[r.time," ",r.cup_name,m.jsx("br",{}),r.nickname_home," ",r.status===1?r.home_goal+" - "+r.away_goal:"-"," ",r.nickname_away]})},r.index))})},g=(s,c)=>c.type==="date"?$(s):c.type==="month"?b(s):c.originNode;return m.jsx("div",{className:De.schedule,children:m.jsx(U,{cellRender:g,onChange:C})})}export{Fe as default};
