import{r as a,c as re,A as ce,y as wt,P as Ct,z as P,K as Fe,x as Y,aQ as xt,ab as bt,_ as ye,W as we,t as Ce,aR as St,Z as It,a9 as ot,b as Ve,g as yt,m as Ke,at as xe,aS as Nt,aK as Rt,aT as Mt,a3 as Tt,u as rt,aU as jt,aV as Pt,aW as Et,aX as _t,aY as kt,aZ as Ot,a_ as Lt,a$ as Qe,C as at,a4 as it,M as st,Q as Oe,b0 as qe,b1 as $t,e as Ee,h as oe,j as v,I as Ne,s as At,i as zt,k as Dt,n as Xe,B as Ze,S as Yt,p as Xt}from"./index-C9q2FBSY.js";import{M as Zt}from"./index-DA9yrtLn.js";import{R as be,E as Je}from"./index-BfF7_6j9.js";import{T as Ft}from"./index-CTwM5QEi.js";import{U as Vt}from"./index-BmaZIg_e.js";import{u as Wt}from"./index-BtVQP8yc.js";import{S as Bt}from"./SearchForm--fHSw7Ey.js";import{g as lt,a as Se,b as Ht,F as Ut}from"./Table-Aik4FbcR.js";import{T as _e}from"./index-BQCSfmgw.js";import{T as Gt}from"./index-CXwXhMOH.js";import"./useIcons-B3ELihdy.js";var Re=a.createContext(null),Kt=function(e){var n=e.visible,o=e.maskTransitionName,r=e.getContainer,i=e.prefixCls,d=e.rootClassName,l=e.icons,u=e.countRender,f=e.showSwitch,c=e.showProgress,s=e.current,I=e.transform,p=e.count,w=e.scale,h=e.minScale,x=e.maxScale,b=e.closeIcon,j=e.onActive,T=e.onClose,M=e.onZoomIn,m=e.onZoomOut,N=e.onRotateRight,S=e.onRotateLeft,g=e.onFlipX,y=e.onFlipY,R=e.onReset,C=e.toolbarRender,E=e.zIndex,O=e.image,_=a.useContext(Re),X=l.rotateLeft,W=l.rotateRight,B=l.zoomIn,H=l.zoomOut,q=l.close,V=l.left,U=l.right,J=l.flipX,G=l.flipY,se="".concat(i,"-operations-operation");a.useEffect(function(){var L=function(A){A.keyCode===Fe.ESC&&T()};return n&&window.addEventListener("keydown",L),function(){window.removeEventListener("keydown",L)}},[n]);var ee=function($,A){$.preventDefault(),$.stopPropagation(),j(A)},z=a.useCallback(function(L){var $=L.type,A=L.disabled,F=L.onClick,D=L.icon;return a.createElement("div",{key:$,className:re(se,"".concat(i,"-operations-operation-").concat($),ce({},"".concat(i,"-operations-operation-disabled"),!!A)),onClick:F},D)},[se,i]),le=f?z({icon:V,onClick:function($){return ee($,-1)},type:"prev",disabled:s===0}):void 0,te=f?z({icon:U,onClick:function($){return ee($,1)},type:"next",disabled:s===p-1}):void 0,K=z({icon:G,onClick:y,type:"flipY"}),k=z({icon:J,onClick:g,type:"flipX"}),ae=z({icon:X,onClick:S,type:"rotateLeft"}),Z=z({icon:W,onClick:N,type:"rotateRight"}),Q=z({icon:H,onClick:m,type:"zoomOut",disabled:w<=h}),ie=z({icon:B,onClick:M,type:"zoomIn",disabled:w===x}),ue=a.createElement("div",{className:"".concat(i,"-operations")},K,k,ae,Z,Q,ie);return a.createElement(wt,{visible:n,motionName:o},function(L){var $=L.className,A=L.style;return a.createElement(Ct,{open:!0,getContainer:r??document.body},a.createElement("div",{className:re("".concat(i,"-operations-wrapper"),$,d),style:P(P({},A),{},{zIndex:E})},b===null?null:a.createElement("button",{className:"".concat(i,"-close"),onClick:T},b||q),f&&a.createElement(a.Fragment,null,a.createElement("div",{className:re("".concat(i,"-switch-left"),ce({},"".concat(i,"-switch-left-disabled"),s===0)),onClick:function(D){return ee(D,-1)}},V),a.createElement("div",{className:re("".concat(i,"-switch-right"),ce({},"".concat(i,"-switch-right-disabled"),s===p-1)),onClick:function(D){return ee(D,1)}},U)),a.createElement("div",{className:"".concat(i,"-footer")},c&&a.createElement("div",{className:"".concat(i,"-progress")},u?u(s+1,p):"".concat(s+1," / ").concat(p)),C?C(ue,P(P({icons:{prevIcon:le,nextIcon:te,flipYIcon:K,flipXIcon:k,rotateLeftIcon:ae,rotateRightIcon:Z,zoomOutIcon:Q,zoomInIcon:ie},actions:{onActive:j,onFlipY:y,onFlipX:g,onRotateLeft:S,onRotateRight:N,onZoomOut:m,onZoomIn:M,onReset:R,onClose:T},transform:I},_?{current:s,total:p}:{}),{},{image:O})):ue)))})},ke={x:0,y:0,rotate:0,scale:1,flipX:!1,flipY:!1};function Qt(t,e,n,o){var r=a.useRef(null),i=a.useRef([]),d=a.useState(ke),l=Y(d,2),u=l[0],f=l[1],c=function(w){f(ke),xt(ke,u)||o==null||o({transform:ke,action:w})},s=function(w,h){r.current===null&&(i.current=[],r.current=bt(function(){f(function(x){var b=x;return i.current.forEach(function(j){b=P(P({},b),j)}),r.current=null,o==null||o({transform:b,action:h}),b})})),i.current.push(P(P({},u),w))},I=function(w,h,x,b,j){var T=t.current,M=T.width,m=T.height,N=T.offsetWidth,S=T.offsetHeight,g=T.offsetLeft,y=T.offsetTop,R=w,C=u.scale*w;C>n?(C=n,R=n/u.scale):C<e&&(C=j?C:e,R=C/u.scale);var E=x??innerWidth/2,O=b??innerHeight/2,_=R-1,X=_*M*.5,W=_*m*.5,B=_*(E-u.x-g),H=_*(O-u.y-y),q=u.x-(B-X),V=u.y-(H-W);if(w<1&&C===1){var U=N*C,J=S*C,G=lt(),se=G.width,ee=G.height;U<=se&&J<=ee&&(q=0,V=0)}s({x:q,y:V,scale:C},h)};return{transform:u,resetTransform:c,updateTransform:s,dispatchZoomChange:I}}function et(t,e,n,o){var r=e+n,i=(n-o)/2;if(n>o){if(e>0)return ce({},t,i);if(e<0&&r<o)return ce({},t,-i)}else if(e<0||r>o)return ce({},t,e<0?i:-i);return{}}function ct(t,e,n,o){var r=lt(),i=r.width,d=r.height,l=null;return t<=i&&e<=d?l={x:0,y:0}:(t>i||e>d)&&(l=P(P({},et("x",n,t,i)),et("y",o,e,d))),l}var Ie=1,qt=1;function Jt(t,e,n,o,r,i,d){var l=r.rotate,u=r.scale,f=r.x,c=r.y,s=a.useState(!1),I=Y(s,2),p=I[0],w=I[1],h=a.useRef({diffX:0,diffY:0,transformX:0,transformY:0}),x=function(m){!e||m.button!==0||(m.preventDefault(),m.stopPropagation(),h.current={diffX:m.pageX-f,diffY:m.pageY-c,transformX:f,transformY:c},w(!0))},b=function(m){n&&p&&i({x:m.pageX-h.current.diffX,y:m.pageY-h.current.diffY},"move")},j=function(){if(n&&p){w(!1);var m=h.current,N=m.transformX,S=m.transformY,g=f!==N&&c!==S;if(!g)return;var y=t.current.offsetWidth*u,R=t.current.offsetHeight*u,C=t.current.getBoundingClientRect(),E=C.left,O=C.top,_=l%180!==0,X=ct(_?R:y,_?y:R,E,O);X&&i(P({},X),"dragRebound")}},T=function(m){if(!(!n||m.deltaY==0)){var N=Math.abs(m.deltaY/100),S=Math.min(N,qt),g=Ie+S*o;m.deltaY>0&&(g=Ie/g),d(g,"wheel",m.clientX,m.clientY)}};return a.useEffect(function(){var M,m,N,S;if(e){N=Se(window,"mouseup",j,!1),S=Se(window,"mousemove",b,!1);try{window.top!==window.self&&(M=Se(window.top,"mouseup",j,!1),m=Se(window.top,"mousemove",b,!1))}catch{}}return function(){var g,y,R,C;(g=N)===null||g===void 0||g.remove(),(y=S)===null||y===void 0||y.remove(),(R=M)===null||R===void 0||R.remove(),(C=m)===null||C===void 0||C.remove()}},[n,p,f,c,l,e]),{isMoving:p,onMouseDown:x,onMouseMove:b,onMouseUp:j,onWheel:T}}function en(t){return new Promise(function(e){var n=document.createElement("img");n.onerror=function(){return e(!1)},n.onload=function(){return e(!0)},n.src=t})}function ut(t){var e=t.src,n=t.isCustomPlaceholder,o=t.fallback,r=a.useState(n?"loading":"normal"),i=Y(r,2),d=i[0],l=i[1],u=a.useRef(!1),f=d==="error";a.useEffect(function(){var p=!0;return en(e).then(function(w){!w&&p&&l("error")}),function(){p=!1}},[e]),a.useEffect(function(){n&&!u.current?l("loading"):f&&l("normal")},[e]);var c=function(){l("normal")},s=function(w){u.current=!1,d==="loading"&&w!==null&&w!==void 0&&w.complete&&(w.naturalWidth||w.naturalHeight)&&(u.current=!0,c())},I=f&&o?{src:o}:{onLoad:c,src:e};return[s,I,d]}function Le(t,e){var n=t.x-e.x,o=t.y-e.y;return Math.hypot(n,o)}function tn(t,e,n,o){var r=Le(t,n),i=Le(e,o);if(r===0&&i===0)return[t.x,t.y];var d=r/(r+i),l=t.x+d*(e.x-t.x),u=t.y+d*(e.y-t.y);return[l,u]}function nn(t,e,n,o,r,i,d){var l=r.rotate,u=r.scale,f=r.x,c=r.y,s=a.useState(!1),I=Y(s,2),p=I[0],w=I[1],h=a.useRef({point1:{x:0,y:0},point2:{x:0,y:0},eventType:"none"}),x=function(m){h.current=P(P({},h.current),m)},b=function(m){if(e){m.stopPropagation(),w(!0);var N=m.touches,S=N===void 0?[]:N;S.length>1?x({point1:{x:S[0].clientX,y:S[0].clientY},point2:{x:S[1].clientX,y:S[1].clientY},eventType:"touchZoom"}):x({point1:{x:S[0].clientX-f,y:S[0].clientY-c},eventType:"move"})}},j=function(m){var N=m.touches,S=N===void 0?[]:N,g=h.current,y=g.point1,R=g.point2,C=g.eventType;if(S.length>1&&C==="touchZoom"){var E={x:S[0].clientX,y:S[0].clientY},O={x:S[1].clientX,y:S[1].clientY},_=tn(y,R,E,O),X=Y(_,2),W=X[0],B=X[1],H=Le(E,O)/Le(y,R);d(H,"touchZoom",W,B,!0),x({point1:E,point2:O,eventType:"touchZoom"})}else C==="move"&&(i({x:S[0].clientX-y.x,y:S[0].clientY-y.y},"move"),x({eventType:"move"}))},T=function(){if(n){if(p&&w(!1),x({eventType:"none"}),o>u)return i({x:0,y:0,scale:o},"touchZoom");var m=t.current.offsetWidth*u,N=t.current.offsetHeight*u,S=t.current.getBoundingClientRect(),g=S.left,y=S.top,R=l%180!==0,C=ct(R?N:m,R?m:N,g,y);C&&i(P({},C),"dragRebound")}};return a.useEffect(function(){var M;return n&&e&&(M=Se(window,"touchmove",function(m){return m.preventDefault()},{passive:!1})),function(){var m;(m=M)===null||m===void 0||m.remove()}},[n,e]),{isTouching:p,onTouchStart:b,onTouchMove:j,onTouchEnd:T}}var on=["fallback","src","imgRef"],rn=["prefixCls","src","alt","imageInfo","fallback","movable","onClose","visible","icons","rootClassName","closeIcon","getContainer","current","count","countRender","scaleStep","minScale","maxScale","transitionName","maskTransitionName","imageRender","imgCommonProps","toolbarRender","onTransform","onChange"],an=function(e){var n=e.fallback,o=e.src,r=e.imgRef,i=ye(e,on),d=ut({src:o,fallback:n}),l=Y(d,2),u=l[0],f=l[1];return we.createElement("img",Ce({ref:function(s){r.current=s,u(s)}},i,f))},dt=function(e){var n=e.prefixCls,o=e.src,r=e.alt,i=e.imageInfo,d=e.fallback,l=e.movable,u=l===void 0?!0:l,f=e.onClose,c=e.visible,s=e.icons,I=s===void 0?{}:s,p=e.rootClassName,w=e.closeIcon,h=e.getContainer,x=e.current,b=x===void 0?0:x,j=e.count,T=j===void 0?1:j,M=e.countRender,m=e.scaleStep,N=m===void 0?.5:m,S=e.minScale,g=S===void 0?1:S,y=e.maxScale,R=y===void 0?50:y,C=e.transitionName,E=C===void 0?"zoom":C,O=e.maskTransitionName,_=O===void 0?"fade":O,X=e.imageRender,W=e.imgCommonProps,B=e.toolbarRender,H=e.onTransform,q=e.onChange,V=ye(e,rn),U=a.useRef(),J=a.useContext(Re),G=J&&T>1,se=J&&T>=1,ee=a.useState(!0),z=Y(ee,2),le=z[0],te=z[1],K=Qt(U,g,R,H),k=K.transform,ae=K.resetTransform,Z=K.updateTransform,Q=K.dispatchZoomChange,ie=Jt(U,u,c,N,k,Z,Q),ue=ie.isMoving,L=ie.onMouseDown,$=ie.onWheel,A=nn(U,u,c,g,k,Z,Q),F=A.isTouching,D=A.onTouchStart,fe=A.onTouchMove,he=A.onTouchEnd,de=k.rotate,me=k.scale,Ae=re(ce({},"".concat(n,"-moving"),ue));a.useEffect(function(){le||te(!0)},[le]);var ze=function(){ae("close")},De=function(){Q(Ie+N,"zoomIn")},ve=function(){Q(Ie/(Ie+N),"zoomOut")},ge=function(){Z({rotate:de+90},"rotateRight")},Me=function(){Z({rotate:de-90},"rotateLeft")},Te=function(){Z({flipX:!k.flipX},"flipX")},je=function(){Z({flipY:!k.flipY},"flipY")},gt=function(){ae("reset")},Ye=function(pe){var Pe=b+pe;!Number.isInteger(Pe)||Pe<0||Pe>T-1||(te(!1),ae(pe<0?"prev":"next"),q==null||q(Pe,b))},pt=function(pe){!c||!G||(pe.keyCode===Fe.LEFT?Ye(-1):pe.keyCode===Fe.RIGHT&&Ye(1))},ht=function(pe){c&&(me!==1?Z({x:0,y:0,scale:1},"doubleClick"):Q(Ie+N,"doubleClick",pe.clientX,pe.clientY))};a.useEffect(function(){var ne=Se(window,"keydown",pt,!1);return function(){ne.remove()}},[c,G,b]);var Ue=we.createElement(an,Ce({},W,{width:e.width,height:e.height,imgRef:U,className:"".concat(n,"-img"),alt:r,style:{transform:"translate3d(".concat(k.x,"px, ").concat(k.y,"px, 0) scale3d(").concat(k.flipX?"-":"").concat(me,", ").concat(k.flipY?"-":"").concat(me,", 1) rotate(").concat(de,"deg)"),transitionDuration:(!le||F)&&"0s"},fallback:d,src:o,onWheel:$,onMouseDown:L,onDoubleClick:ht,onTouchStart:D,onTouchMove:fe,onTouchEnd:he,onTouchCancel:he})),Ge=P({url:o,alt:r},i);return we.createElement(we.Fragment,null,we.createElement(St,Ce({transitionName:E,maskTransitionName:_,closable:!1,keyboard:!0,prefixCls:n,onClose:f,visible:c,classNames:{wrapper:Ae},rootClassName:p,getContainer:h},V,{afterClose:ze}),we.createElement("div",{className:"".concat(n,"-img-wrapper")},X?X(Ue,P({transform:k,image:Ge},J?{current:b}:{})):Ue)),we.createElement(Kt,{visible:c,transform:k,maskTransitionName:_,closeIcon:w,getContainer:h,prefixCls:n,rootClassName:p,icons:I,countRender:M,showSwitch:G,showProgress:se,current:b,count:T,scale:me,minScale:g,maxScale:R,toolbarRender:B,onActive:Ye,onZoomIn:De,onZoomOut:ve,onRotateRight:ge,onRotateLeft:Me,onFlipX:Te,onFlipY:je,onClose:f,onReset:gt,zIndex:V.zIndex!==void 0?V.zIndex+1:void 0,image:Ge}))},We=["crossOrigin","decoding","draggable","loading","referrerPolicy","sizes","srcSet","useMap","alt"];function sn(t){var e=a.useState({}),n=Y(e,2),o=n[0],r=n[1],i=a.useCallback(function(l,u){return r(function(f){return P(P({},f),{},ce({},l,u))}),function(){r(function(f){var c=P({},f);return delete c[l],c})}},[]),d=a.useMemo(function(){return t?t.map(function(l){if(typeof l=="string")return{data:{src:l}};var u={};return Object.keys(l).forEach(function(f){["src"].concat(It(We)).includes(f)&&(u[f]=l[f])}),{data:u}}):Object.keys(o).reduce(function(l,u){var f=o[u],c=f.canPreview,s=f.data;return c&&l.push({data:s,id:u}),l},[])},[t,o]);return[d,i,!!t]}var ln=["visible","onVisibleChange","getContainer","current","movable","minScale","maxScale","countRender","closeIcon","onChange","onTransform","toolbarRender","imageRender"],cn=["src"],un=function(e){var n,o=e.previewPrefixCls,r=o===void 0?"rc-image-preview":o,i=e.children,d=e.icons,l=d===void 0?{}:d,u=e.items,f=e.preview,c=e.fallback,s=ot(f)==="object"?f:{},I=s.visible,p=s.onVisibleChange,w=s.getContainer,h=s.current,x=s.movable,b=s.minScale,j=s.maxScale,T=s.countRender,M=s.closeIcon,m=s.onChange,N=s.onTransform,S=s.toolbarRender,g=s.imageRender,y=ye(s,ln),R=sn(u),C=Y(R,3),E=C[0],O=C[1],_=C[2],X=Ve(0,{value:h}),W=Y(X,2),B=W[0],H=W[1],q=a.useState(!1),V=Y(q,2),U=V[0],J=V[1],G=((n=E[B])===null||n===void 0?void 0:n.data)||{},se=G.src,ee=ye(G,cn),z=Ve(!!I,{value:I,onChange:function(F,D){p==null||p(F,D,B)}}),le=Y(z,2),te=le[0],K=le[1],k=a.useState(null),ae=Y(k,2),Z=ae[0],Q=ae[1],ie=a.useCallback(function(A,F,D,fe){var he=_?E.findIndex(function(de){return de.data.src===F}):E.findIndex(function(de){return de.id===A});H(he<0?0:he),K(!0),Q({x:D,y:fe}),J(!0)},[E,_]);a.useEffect(function(){te?U||H(0):J(!1)},[te]);var ue=function(F,D){H(F),m==null||m(F,D)},L=function(){K(!1),Q(null)},$=a.useMemo(function(){return{register:O,onPreview:ie}},[O,ie]);return a.createElement(Re.Provider,{value:$},i,a.createElement(dt,Ce({"aria-hidden":!te,movable:x,visible:te,prefixCls:r,closeIcon:M,onClose:L,mousePosition:Z,imgCommonProps:ee,src:se,fallback:c,icons:l,minScale:b,maxScale:j,getContainer:w,current:B,count:E.length,countRender:T,onTransform:N,toolbarRender:S,imageRender:g,onChange:ue},y)))},tt=0;function dn(t,e){var n=a.useState(function(){return tt+=1,String(tt)}),o=Y(n,1),r=o[0],i=a.useContext(Re),d={data:e,canPreview:t};return a.useEffect(function(){if(i)return i.register(r,d)},[]),a.useEffect(function(){i&&i.register(r,d)},[t,e]),r}var mn=["src","alt","onPreviewClose","prefixCls","previewPrefixCls","placeholder","fallback","width","height","style","preview","className","onClick","onError","wrapperClassName","wrapperStyle","rootClassName"],fn=["src","visible","onVisibleChange","getContainer","mask","maskClassName","movable","icons","scaleStep","minScale","maxScale","imageRender","toolbarRender"],He=function(e){var n=e.src,o=e.alt,r=e.onPreviewClose,i=e.prefixCls,d=i===void 0?"rc-image":i,l=e.previewPrefixCls,u=l===void 0?"".concat(d,"-preview"):l,f=e.placeholder,c=e.fallback,s=e.width,I=e.height,p=e.style,w=e.preview,h=w===void 0?!0:w,x=e.className,b=e.onClick,j=e.onError,T=e.wrapperClassName,M=e.wrapperStyle,m=e.rootClassName,N=ye(e,mn),S=f&&f!==!0,g=ot(h)==="object"?h:{},y=g.src,R=g.visible,C=R===void 0?void 0:R,E=g.onVisibleChange,O=E===void 0?r:E,_=g.getContainer,X=_===void 0?void 0:_,W=g.mask,B=g.maskClassName,H=g.movable,q=g.icons,V=g.scaleStep,U=g.minScale,J=g.maxScale,G=g.imageRender,se=g.toolbarRender,ee=ye(g,fn),z=y??n,le=Ve(!!C,{value:C,onChange:O}),te=Y(le,2),K=te[0],k=te[1],ae=ut({src:n,isCustomPlaceholder:S,fallback:c}),Z=Y(ae,3),Q=Z[0],ie=Z[1],ue=Z[2],L=a.useState(null),$=Y(L,2),A=$[0],F=$[1],D=a.useContext(Re),fe=!!h,he=function(){k(!1),F(null)},de=re(d,T,m,ce({},"".concat(d,"-error"),ue==="error")),me=a.useMemo(function(){var ve={};return We.forEach(function(ge){e[ge]!==void 0&&(ve[ge]=e[ge])}),ve},We.map(function(ve){return e[ve]})),Ae=a.useMemo(function(){return P(P({},me),{},{src:z})},[z,me]),ze=dn(fe,Ae),De=function(ge){var Me=Ht(ge.target),Te=Me.left,je=Me.top;D?D.onPreview(ze,z,Te,je):(F({x:Te,y:je}),k(!0)),b==null||b(ge)};return a.createElement(a.Fragment,null,a.createElement("div",Ce({},N,{className:de,onClick:fe?De:b,style:P({width:s,height:I},M)}),a.createElement("img",Ce({},me,{className:re("".concat(d,"-img"),ce({},"".concat(d,"-img-placeholder"),f===!0),x),style:P({height:I},p),ref:Q},ie,{width:s,height:I,onError:j})),ue==="loading"&&a.createElement("div",{"aria-hidden":"true",className:"".concat(d,"-placeholder")},f),W&&fe&&a.createElement("div",{className:re("".concat(d,"-mask"),B),style:{display:(p==null?void 0:p.display)==="none"?"none":void 0}},W)),!D&&fe&&a.createElement(dt,Ce({"aria-hidden":!K,visible:K,prefixCls:u,onClose:he,mousePosition:A,src:z,alt:o,imageInfo:{width:s,height:I},fallback:c,getContainer:X,icons:q,movable:H,scaleStep:V,minScale:U,maxScale:J,rootClassName:m,imageRender:G,imgCommonProps:me,toolbarRender:se},ee)))};He.PreviewGroup=un;const Be=t=>({position:t||"absolute",inset:0}),vn=t=>{const{iconCls:e,motionDurationSlow:n,paddingXXS:o,marginXXS:r,prefixCls:i,colorTextLightSolid:d}=t;return{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center",color:d,background:new xe("#000").setAlpha(.5).toRgbString(),cursor:"pointer",opacity:0,transition:`opacity ${n}`,[`.${i}-mask-info`]:Object.assign(Object.assign({},Tt),{padding:`0 ${rt(o)}`,[e]:{marginInlineEnd:r,svg:{verticalAlign:"baseline"}}})}},gn=t=>{const{previewCls:e,modalMaskBg:n,paddingSM:o,marginXL:r,margin:i,paddingLG:d,previewOperationColorDisabled:l,previewOperationHoverColor:u,motionDurationSlow:f,iconCls:c,colorTextLightSolid:s}=t,I=new xe(n).setAlpha(.1),p=I.clone().setAlpha(.2);return{[`${e}-footer`]:{position:"fixed",bottom:r,left:{_skip_check_:!0,value:"50%"},display:"flex",flexDirection:"column",alignItems:"center",color:t.previewOperationColor,transform:"translateX(-50%)"},[`${e}-progress`]:{marginBottom:i},[`${e}-close`]:{position:"fixed",top:r,right:{_skip_check_:!0,value:r},display:"flex",color:s,backgroundColor:I.toRgbString(),borderRadius:"50%",padding:o,outline:0,border:0,cursor:"pointer",transition:`all ${f}`,"&:hover":{backgroundColor:p.toRgbString()},[`& > ${c}`]:{fontSize:t.previewOperationSize}},[`${e}-operations`]:{display:"flex",alignItems:"center",padding:`0 ${rt(d)}`,backgroundColor:I.toRgbString(),borderRadius:100,"&-operation":{marginInlineStart:o,padding:o,cursor:"pointer",transition:`all ${f}`,userSelect:"none",[`&:not(${e}-operations-operation-disabled):hover > ${c}`]:{color:u},"&-disabled":{color:l,cursor:"not-allowed"},"&:first-of-type":{marginInlineStart:0},[`& > ${c}`]:{fontSize:t.previewOperationSize}}}}},pn=t=>{const{modalMaskBg:e,iconCls:n,previewOperationColorDisabled:o,previewCls:r,zIndexPopup:i,motionDurationSlow:d}=t,l=new xe(e).setAlpha(.1),u=l.clone().setAlpha(.2);return{[`${r}-switch-left, ${r}-switch-right`]:{position:"fixed",insetBlockStart:"50%",zIndex:t.calc(i).add(1).equal(),display:"flex",alignItems:"center",justifyContent:"center",width:t.imagePreviewSwitchSize,height:t.imagePreviewSwitchSize,marginTop:t.calc(t.imagePreviewSwitchSize).mul(-1).div(2).equal(),color:t.previewOperationColor,background:l.toRgbString(),borderRadius:"50%",transform:"translateY(-50%)",cursor:"pointer",transition:`all ${d}`,userSelect:"none","&:hover":{background:u.toRgbString()},"&-disabled":{"&, &:hover":{color:o,background:"transparent",cursor:"not-allowed",[`> ${n}`]:{cursor:"not-allowed"}}},[`> ${n}`]:{fontSize:t.previewOperationSize}},[`${r}-switch-left`]:{insetInlineStart:t.marginSM},[`${r}-switch-right`]:{insetInlineEnd:t.marginSM}}},hn=t=>{const{motionEaseOut:e,previewCls:n,motionDurationSlow:o,componentCls:r}=t;return[{[`${r}-preview-root`]:{[n]:{height:"100%",textAlign:"center",pointerEvents:"none"},[`${n}-body`]:Object.assign(Object.assign({},Be()),{overflow:"hidden"}),[`${n}-img`]:{maxWidth:"100%",maxHeight:"70%",verticalAlign:"middle",transform:"scale3d(1, 1, 1)",cursor:"grab",transition:`transform ${o} ${e} 0s`,userSelect:"none","&-wrapper":Object.assign(Object.assign({},Be()),{transition:`transform ${o} ${e} 0s`,display:"flex",justifyContent:"center",alignItems:"center","& > *":{pointerEvents:"auto"},"&::before":{display:"inline-block",width:1,height:"50%",marginInlineEnd:-1,content:'""'}})},[`${n}-moving`]:{[`${n}-preview-img`]:{cursor:"grabbing","&-wrapper":{transitionDuration:"0s"}}}}},{[`${r}-preview-root`]:{[`${n}-wrap`]:{zIndex:t.zIndexPopup}}},{[`${r}-preview-operations-wrapper`]:{position:"fixed",zIndex:t.calc(t.zIndexPopup).add(1).equal()},"&":[gn(t),pn(t)]}]},wn=t=>{const{componentCls:e}=t;return{[e]:{position:"relative",display:"inline-block",[`${e}-img`]:{width:"100%",height:"auto",verticalAlign:"middle"},[`${e}-img-placeholder`]:{backgroundColor:t.colorBgContainerDisabled,backgroundImage:"url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTQuNSAyLjVoLTEzQS41LjUgMCAwIDAgMSAzdjEwYS41LjUgMCAwIDAgLjUuNWgxM2EuNS41IDAgMCAwIC41LS41VjNhLjUuNSAwIDAgMC0uNS0uNXpNNS4yODEgNC43NWExIDEgMCAwIDEgMCAyIDEgMSAwIDAgMSAwLTJ6bTguMDMgNi44M2EuMTI3LjEyNyAwIDAgMS0uMDgxLjAzSDIuNzY5YS4xMjUuMTI1IDAgMCAxLS4wOTYtLjIwN2wyLjY2MS0zLjE1NmEuMTI2LjEyNiAwIDAgMSAuMTc3LS4wMTZsLjAxNi4wMTZMNy4wOCAxMC4wOWwyLjQ3LTIuOTNhLjEyNi4xMjYgMCAwIDEgLjE3Ny0uMDE2bC4wMTUuMDE2IDMuNTg4IDQuMjQ0YS4xMjcuMTI3IDAgMCAxLS4wMi4xNzV6IiBmaWxsPSIjOEM4QzhDIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48L3N2Zz4=')",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"30%"},[`${e}-mask`]:Object.assign({},vn(t)),[`${e}-mask:hover`]:{opacity:1},[`${e}-placeholder`]:Object.assign({},Be())}}},Cn=t=>{const{previewCls:e}=t;return{[`${e}-root`]:Rt(t,"zoom"),"&":Mt(t,!0)}},xn=t=>({zIndexPopup:t.zIndexPopupBase+80,previewOperationColor:new xe(t.colorTextLightSolid).setAlpha(.65).toRgbString(),previewOperationHoverColor:new xe(t.colorTextLightSolid).setAlpha(.85).toRgbString(),previewOperationColorDisabled:new xe(t.colorTextLightSolid).setAlpha(.25).toRgbString(),previewOperationSize:t.fontSizeIcon*1.5}),mt=yt("Image",t=>{const e=`${t.componentCls}-preview`,n=Ke(t,{previewCls:e,modalMaskBg:new xe("#000").setAlpha(.45).toRgbString(),imagePreviewSwitchSize:t.controlHeightLG});return[wn(n),hn(n),Nt(Ke(n,{componentCls:e})),Cn(n)]},xn);var bn=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n};const ft={rotateLeft:a.createElement(jt,null),rotateRight:a.createElement(Pt,null),zoomIn:a.createElement(Et,null),zoomOut:a.createElement(_t,null),close:a.createElement(kt,null),left:a.createElement(Ot,null),right:a.createElement(Lt,null),flipX:a.createElement(Qe,null),flipY:a.createElement(Qe,{rotate:90})},Sn=t=>{var{previewPrefixCls:e,preview:n}=t,o=bn(t,["previewPrefixCls","preview"]);const{getPrefixCls:r}=a.useContext(at),i=r("image",e),d=`${i}-preview`,l=r(),u=it(i),[f,c,s]=mt(i,u),[I]=st("ImagePreview",typeof n=="object"?n.zIndex:void 0),p=a.useMemo(()=>{var w;if(n===!1)return n;const h=typeof n=="object"?n:{},x=re(c,s,u,(w=h.rootClassName)!==null&&w!==void 0?w:"");return Object.assign(Object.assign({},h),{transitionName:Oe(l,"zoom",h.transitionName),maskTransitionName:Oe(l,"fade",h.maskTransitionName),rootClassName:x,zIndex:I})},[n]);return f(a.createElement(He.PreviewGroup,Object.assign({preview:p,previewPrefixCls:d,icons:ft},o)))};var nt=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n};const vt=t=>{var e;const{prefixCls:n,preview:o,className:r,rootClassName:i,style:d}=t,l=nt(t,["prefixCls","preview","className","rootClassName","style"]),{getPrefixCls:u,locale:f=qe,getPopupContainer:c,image:s}=a.useContext(at),I=u("image",n),p=u(),w=f.Image||qe.Image,h=it(I),[x,b,j]=mt(I,h),T=re(i,b,j,h),M=re(r,b,s==null?void 0:s.className),[m]=st("ImagePreview",typeof o=="object"?o.zIndex:void 0),N=a.useMemo(()=>{var g;if(o===!1)return o;const y=typeof o=="object"?o:{},{getContainer:R,closeIcon:C,rootClassName:E}=y,O=nt(y,["getContainer","closeIcon","rootClassName"]);return Object.assign(Object.assign({mask:a.createElement("div",{className:`${I}-mask-info`},a.createElement($t,null),w==null?void 0:w.preview),icons:ft},O),{rootClassName:re(T,E),getContainer:R??c,transitionName:Oe(p,"zoom",y.transitionName),maskTransitionName:Oe(p,"fade",y.maskTransitionName),zIndex:m,closeIcon:C??((g=s==null?void 0:s.preview)===null||g===void 0?void 0:g.closeIcon)})},[o,w,(e=s==null?void 0:s.preview)===null||e===void 0?void 0:e.closeIcon]),S=Object.assign(Object.assign({},s==null?void 0:s.style),d);return x(a.createElement(He,Object.assign({prefixCls:I,preview:N,rootClassName:T,className:M,style:S},l)))};vt.PreviewGroup=Sn;const $e={getNewsList(t){return Ee.get("/admin/news",t)},createNews(t){return Ee.post("/admin/news",t)},editNews(t){return Ee.put("/admin/news/"+t.id,t)},delNews(t){return Ee.delete("/admin/news/"+t.id)}},In=t=>{const[e]=oe.useForm(),[n,o]=a.useState(!1),[r,i]=a.useState("create"),[d,l]=a.useState(""),[u,f]=a.useState(!1);a.useImperativeHandle(t.mRef,()=>({open:c}));const c=(h,x)=>{i(h),o(!0),h==="create"&&e.setFieldsValue({is_banner:0,sort:9,is_use:1}),h==="edit"&&x&&(e.setFieldsValue(x),l(x.image))},s=async()=>{if(await e.validateFields()){const x={...e.getFieldsValue(),image:d};r==="create"?await $e.createNews(x):await $e.editNews(x),I(),t.update()}},I=()=>{o(!1),l(""),e.resetFields()},p=h=>{const x=h.type==="image/jpeg"||h.type==="image/png";if(!x)return Xe.error("只能上传png或jpeg格式的图片"),!1;const b=h.size/1024/1024<.5;return b||Xe.error("图片不能超过500K"),x&&b},w=h=>{var x,b;if(((x=h.file)==null?void 0:x.status)==="uploading"){f(!0);return}if(((b=h.file)==null?void 0:b.status)==="done"){f(!1);const{code:j,result:T,message:M}=h.file.response;j===""?l(T):M.error(M)}else h.file.status==="error"&&Xe.error("服务器异常，请稍后重试")};return v.jsx(Zt,{title:r==="create"?"创建新闻":"编辑新闻",okText:"确定",cancelText:"取消",width:800,open:n,onOk:s,onCancel:I,children:v.jsxs(oe,{form:e,labelCol:{span:4},labelAlign:"right",children:[v.jsx(oe.Item,{name:"id",hidden:!0,children:v.jsx(Ne,{})}),v.jsx(oe.Item,{name:"is_banner",label:"是否横幅",children:v.jsxs(be.Group,{children:[v.jsx(be,{value:1,children:"横幅"}),v.jsx(be,{value:0,children:"一般"})]})}),v.jsx(oe.Item,{label:"标题",name:"title",rules:[{required:!0,message:"请输入标题"}],children:v.jsx(Ne,{placeholder:"请输入标题"})}),v.jsx(oe.Item,{name:"subject",label:"简介",children:v.jsx(Ne.TextArea,{})}),v.jsx(oe.Item,{label:"链接地址",name:"url",children:v.jsx(Ne,{placeholder:"请输入链接地址"})}),v.jsx(oe.Item,{label:"排序",name:"sort",children:v.jsx(Ft,{placeholder:"请输入排序"})}),v.jsx(oe.Item,{name:"is_use",label:"是否启用",children:v.jsxs(be.Group,{children:[v.jsx(be,{value:1,children:"启用"}),v.jsx(be,{value:0,children:"禁用"})]})}),v.jsx(oe.Item,{label:"图片",children:v.jsx(Vt,{listType:"picture-card",showUploadList:!1,headers:{Authorization:"Bearer "+At.get("token").access_token},action:"/api/admin/upload",beforeUpload:p,onChange:w,children:d?v.jsx("img",{src:d,style:{width:"100%"}}):v.jsxs("div",{children:[u?v.jsx(zt,{rev:void 0}):v.jsx(Dt,{rev:void 0}),v.jsx("div",{style:{marginTop:5},children:"上传图片"})]})})})]})})};function Ln(){const[t]=oe.useForm(),e=a.useRef(),{Link:n}=Gt,o=({current:c,pageSize:s},I)=>$e.getNewsList({...I,pageNum:c,pageSize:s}).then(p=>({total:p.page.total,list:p.list})),{tableProps:r,search:i}=Wt(o,{form:t,defaultPageSize:10}),d=()=>{var c;(c=e.current)==null||c.open("create")},l=c=>{var s;(s=e.current)==null||s.open("edit",c)},u=c=>{Xt.confirm({title:"删除确认",content:v.jsx("span",{children:"确认删除该新闻吗？"}),okText:"确定",cancelText:"取消",onOk:async()=>{try{await $e.delNews({id:c}),i.reset()}catch{}}})},f=[{title:"是否横幅",dataIndex:"is_banner",key:"is_banner",width:60,render(c){return c===1?v.jsx(_e,{color:"orange",children:"横幅"}):v.jsx(_e,{children:"一般"})}},{title:"标题",dataIndex:"title",key:"title",width:180},{title:"简介",dataIndex:"subject",key:"subject",width:240},{title:"图片",dataIndex:"image",key:"image",width:120,render(c){return c?v.jsx(vt,{width:100,src:c}):v.jsx(Je,{image:Je.PRESENTED_IMAGE_SIMPLE})}},{title:"链接地址",dataIndex:"url",key:"url",width:160,render(c){return v.jsx(n,{href:c,target:"_blank",children:c})}},{title:"排序",dataIndex:"sort",key:"sort",width:40},{title:"是否启用",dataIndex:"is_use",key:"is_use",width:60,render(c){return c===1?v.jsx(_e,{color:"success",children:"启用"}):v.jsx(_e,{color:"error",children:"禁用"})}},{title:"创建时间",dataIndex:"create_at",key:"create_at",width:100},{title:"操作",key:"operations",width:120,render(c){return v.jsxs(Yt,{children:[v.jsx(Ze,{type:"text",onClick:()=>l(c),children:"编辑"}),v.jsx(Ze,{type:"text",danger:!0,onClick:()=>u(c.id),children:"删除"})]})}}];return v.jsxs("div",{children:[v.jsx(Bt,{form:t,initialValues:{state:1},submit:i.submit,reset:i.reset,children:v.jsx(oe.Item,{name:"title",label:"标题",children:v.jsx(Ne,{placeholder:"请输入标题"})})}),v.jsxs("div",{className:"base-table",children:[v.jsxs("div",{className:"header-wrapper",children:[v.jsx("div",{className:"title",children:"新闻列表"}),v.jsx("div",{className:"action",children:v.jsx(Ze,{type:"primary",onClick:d,children:"新增"})})]}),v.jsx(Ut,{bordered:!0,rowKey:"id",columns:f,...r})]}),v.jsx(In,{mRef:e,update:()=>{i.reset()}})]})}export{Ln as default};
